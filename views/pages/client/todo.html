<link rel="stylesheet" href="css/todo-style.css">

<div class="container-fluid pb-4 pt-4 paddding">
    <div class="container paddding">
        <div class="row mx-0">
            <div class="col-md-8 animate-box" data-animate-effect="fadeInLeft">
                <div>
                    <div class="fh5co_heading fh5co_heading_border_bottom py-2 mb-4">
                        <i class="fa fa-check"></i>To Do Checklist
                    </div>
                </div>

                <div id="todo-list">
                    <span class="todo-wrap">
                        <input type="checkbox" id="1" checked />
                        <label for="1" class="todo">
                            <i class="fa fa-check"></i>
                            Have a good idea
                        </label>
                        <span class="delete-item" title="remove">
                            <i class="fa fa-times-circle"></i>
                        </span>
                    </span>
                    <span class="todo-wrap">
                        <input type="checkbox" id="2" />
                        <label for="2" class="todo">
                            <i class="fa fa-check"></i>
                            Plan idea execution
                        </label>
                        <span class="delete-item" title="remove">
                            <i class="fa fa-times-circle"></i>
                        </span>
                    </span>
                    <span class="todo-wrap">
                        <input type="checkbox" id="3" />
                        <label for="3" class="todo">
                            <i class="fa fa-check"></i>
                            Execute idea
                        </label>
                        <span class="delete-item" title="remove">
                            <i class="fa fa-times-circle"></i>
                        </span>
                    </span>
                    <span class="todo-wrap">
                        <input type="checkbox" id="4" />
                        <label for="4" class="todo">
                            <i class="fa fa-check"></i>
                            Celebrate with a cold one
                        </label>
                        <span class="delete-item" title="remove">
                            <i class="fa fa-times-circle"></i>
                        </span>
                    </span>
                    <div id="add-todo">
                        <i class="fa fa-plus"></i>
                        Add an Item
                    </div>
                </div>

            </div>

            <%- include('../../partial/client/tags.html'); %>
        </div>
    </div>
</div>

<script>
    // add items
    $('#add-todo').click(function () {
        var lastSibling = $('#todo-list > .todo-wrap:last-of-type > input').attr('id');
        var newId = Number(lastSibling) + 1;

        $(this).before('<span class="editing todo-wrap"><input type="checkbox" id="' + newId + '"/><label for="' + newId + '" class="todo"><i class="fa fa-check"></i><input type="text" class="input-todo" id="input-todo' + newId + '"/></label></div>');
        $('#input-todo' + newId + '').parent().parent().animate({
            height: "36px"
        }, 200)

        $('#input-todo' + newId + '').on('blur', function () {
            var todoTitle = $('#input-todo' + newId + '').val();
            var todoTitleLength = todoTitle.length;
            if (todoTitleLength > 0) {
                $(this).before(todoTitle);
                $(this).parent().parent().removeClass('editing');
                $(this).parent().after('<span class="delete-item" title="remove"><i class="fa fa-times-circle"></i></span>');
                $(this).remove();
                $('.delete-item').click(function () {
                    var parentItem = $(this).parent();
                    parentItem.animate({
                        left: "-30%",
                        height: 0,
                        opacity: 0
                    }, 200);
                    setTimeout(function () { $(parentItem).remove(); }, 1000);
                });
            }
            else {
                $('.editing').animate({
                    height: '0px'
                }, 200);
                setTimeout(function () {
                    $('.editing').remove()
                }, 400)
            }
        })

    });

    // remove items 

    $('.delete-item').click(function () {
        var parentItem = $(this).parent();
        parentItem.animate({
            left: "-30%",
            height: 0,
            opacity: 0
        }, 200);
        setTimeout(function () { $(parentItem).remove(); }, 1000);
    });

</script>